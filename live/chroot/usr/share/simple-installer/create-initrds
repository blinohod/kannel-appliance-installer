#!/bin/bash
#===========================================================================#
#                Создаем initrd для каждого ядра                            #
#===========================================================================#
# (C) Denis Smirnov                                                May 2011 #
#===========================================================================#

# все установленные ядра
for s in boot/vmlinuz-*; do
	# кроме симлинков на ядра
	[ -h "$s" ] && continue
	kernel=${s##boot/vmlinuz-}
	msgbox "Create initrd for: $kernel"
	chroot . make-initrd -v -k "$kernel" &> /tmp/logger
done
